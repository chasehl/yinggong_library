<!-- pages/home/home.wxml -->
<view class="home-page">
  <!-- 1. 顶部横幅区域 -->
  <view class="banner">
    <image class="banner-image" src="/images/home-banner.jpg" mode="widthFix"></image>
    <view class="banner-title">欢迎来到智慧图书馆</view>
    <view class="banner-subtitle">探索无尽知识海洋</view>
  </view>

  <!-- 2. 核心搜索区域 -->
  <view class="search-section">
    <view class="search-box" bindtap="goToSearchPage">
      <icon class="search-icon" type="search" size="16"></icon>
      <text class="search-placeholder">搜索书名、作者或ISBN</text>
    </view>
  </view>

  <!-- 3. 核心功能区 -->
  <view class="function-grid">
    <view class="function-item" bindtap="handleFunction" data-type="scan">
      <view class="function-icon icon-scan"></view>
      <text class="function-text">扫码借书</text>
    </view>
    <view class="function-item" bindtap="handleFunction" data-type="hot">
      <view class="function-icon icon-hot"></view>
      <text class="function-text">热门榜单</text>
    </view>
    <view class="function-item" bindtap="handleFunction" data-type="recommend">
      <view class="function-icon icon-recommend"></view>
      <text class="function-text">智能推荐</text>
    </view>
    <view class="function-item" bindtap="handleFunction" data-type="mybook">
      <view class="function-icon icon-mybook"></view>
      <text class="function-text">我的借阅</text>
    </view>
  </view>

  <!-- 4. 核心内容区：热门图书 -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">🔥 热门图书</text>
      <text class="section-more" bindtap="goToBookList">查看更多 ></text>
    </view>
    <view class="book-list">
      <!-- 循环渲染图书列表 -->
      <block wx:for="{{hotBooks}}" wx:key="id">
        <view class="book-card" bindtap="goToBookDetail" data-book-id="{{item.id}}">
          <!-- 图书封面 -->
          <image class="book-cover" src="{{item.coverUrl}}" mode="aspectFill"></image>
          <!-- 图书信息 -->
          <view class="book-info">
            <text class="book-title">{{item.title}}</text>
            <text class="book-author">{{item.author}}</text>
            <view class="book-meta">
              <text class="book-category">{{item.category}}</text>
              <text class="book-status {{item.available ? 'available' : 'borrowed'}}">
                {{item.available ? '可借阅' : '已借出'}}
              </text>
            </view>
          </view>
        </view>
      </block>
    </view>
  </view>

  <!-- 服务公告模块 -->
  <view class="notice" wx:if="{{notice}}">
    <icon type="info" size="14"></icon>
    <text class="notice-text">{{notice}}</text>
  </view>
</view>