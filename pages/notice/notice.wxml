<!--pages/notice/notice.wxml-->
<view class="container">
  
  <view class="header-search">
    <view class="search-box">
      <icon type="search" size="16" color="#999"></icon>
      <input 
      class="search-input" 
      placeholder="æœç´¢å…¬å‘Šæ ‡é¢˜..." 
      placeholder-class="ph-style" 
      confirm-type="search"
      value="{{searchKeyword}}" 
      bindinput="onSearchInput"
      bindconfirm="onSearch"
      />
      <view class="clear-btn" wx:if="{{searchKeyword.length > 0}}" bindtap="onClearSearch">
        <icon type="clear" size="16" color="#ccc"></icon>
      </view>
    </view>
  </view>

  <view class="tabs-wrapper">
    <block wx:for="{{categories}}" wx:key="id">
      <view class="tab-item {{currentTab === index ? 'active' : ''}}" 
            bindtap="switchTab" 
            data-index="{{index}}">
        <text>{{item.name}}</text>
        <view class="tab-line" wx:if="{{currentTab === index}}"></view>
      </view>
    </block>
  </view>

  <scroll-view class="content-scroll" scroll-y="true" bindscrolltolower="loadMore">
    
    <block wx:for="{{noticeList}}" wx:key="id">
      <view class="notice-card" bindtap="goToDetail" data-id="{{item.id}}">
        
        <view class="notice-main">
          <view class="notice-title-wrap">
            <text class="tag top" wx:if="{{item.isTop}}">ç½®é¡¶</text>
            <text class="tag new" wx:elif="{{item.isNew}}">NEW</text>
            <text class="title {{item.read ? 'read' : ''}}">{{item.title}}</text>
          </view>
          
          <view class="notice-meta">
            <text class="date">{{item.date}}</text>
            <text class="views">ğŸ‘ {{item.views}}</text>
          </view>
        </view>

        <view class="notice-img" wx:if="{{item.cover}}">
          <image src="{{item.cover}}" mode="aspectFill"></image>
        </view>
      </view>
    </block>

    <view class="loading-tips">
      <text wx:if="{{hasMore}}">æ­£åœ¨åŠ è½½...</text>
      <text wx:else>- ä»…å±•ç¤ºæœ€è¿‘åŠå¹´çš„å…¬å‘Š -</text>
    </view>
  
  </scroll-view>
</view>